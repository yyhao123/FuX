<UserControl
    x:Class="Demo.Windows.Controls.pages.CMDManagerView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:btn="clr-namespace:Demo.Windows.Controls.button"
    xmlns:cos="clr-namespace:Demo.Windows.Controls.filterDataGrid"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Demo.Windows.Controls.pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:p="clr-namespace:Demo.Windows.Controls.property"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />

        </Grid.RowDefinitions>
        <cos:FilterDataGrid
            x:Name="DataGrid_CustomizeColumns"
            AutoGenerateColumns="False"
            CanDragSum="True"
            CanUserGroup="True"
            CustomizeRowHeaderWidth="80"
            GroupFormatString="yyyy-MM-dd"
            HeadersVisibility="All"
            IsReadOnly="True"
            ItemsSource="{Binding CmdDisplay, IsAsync=True}"
            PageBarVisibility="Visible"
            SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
            SelectionUnit="FullRow"
            ShowRowIndex="True">
            <b:Interaction.Triggers>
                <b:EventTrigger EventName="SelectedCellsChanged">
                    <b:InvokeCommandAction Command="{Binding SelectionChangedCommand}" CommandParameter="{Binding}" />
                </b:EventTrigger>
            </b:Interaction.Triggers>
            <cos:FilterDataGrid.Columns>
                <cos:DataGridTextColumn
                    Binding="{Binding CmdName}"
                    FieldName="CmdName"
                    Header="指令名称" />
                <cos:DataGridTextColumn
                    Binding="{Binding CmdNum}"
                    FieldName="CmdNum"
                    Header="指令编号" />
                <cos:DataGridTextColumn
                    Binding="{Binding TimeOut}"
                    FieldName="TimeOut"
                    Header="超时时长" />
                <cos:DataGridTextColumn
                    Binding="{Binding KeyName}"
                    FieldName="KeyName"
                    Header="指令键值" />
                <cos:DataGridTextColumn
                    Binding="{Binding InType}"
                    FieldName="InType"
                    Header="入参类型" />
                <cos:DataGridTextColumn
                    Binding="{Binding RetType}"
                    FieldName="RetType"
                    Header="返回类型" />
                <cos:DataGridTextColumn
                    MaxWidth="80"
                    Binding="{Binding Remark}"
                    FieldName="Remark"
                    Header="备注" />
                <cos:DataGridTextColumn
                    Binding="{Binding Created}"
                    FieldName="Created"
                    Header="创建日期" />
                <cos:DataGridTextColumn
                    Binding="{Binding DevName}"
                    FieldName="DevName"
                    Header="设备型号" />


            </cos:FilterDataGrid.Columns>
        </cos:FilterDataGrid>
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="70" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <p:PropertyControl
                BasicsData="{Binding EditCmdData}"
                ControlFactory="{Binding CustomPropertyGridControlFactory}"
                Operator="{Binding CustomPropertyGridOperator}" />

            <StackPanel Grid.Column="1">
                <btn:ButtonControl
                    Margin="0,10,0,10"
                    Command="{Binding AddCommand}"
                    Content="添加" />
                <btn:ButtonControl
                    Margin="0,10,0,10"
                    Command="{Binding DeleteCommand}"
                    Content="删除" />
                <btn:ButtonControl
                    Margin="0,10,0,10"
                    Command="{Binding ModifyCommand}"
                    Content="修改" />
            </StackPanel>
        </Grid>


    </Grid>
</UserControl>
